/*!
 * Lightbox for Bootstrap 5 v1.8.5 (https://trvswgnr.github.io/bs5-lightbox/)
 * Copyright 2025 Travis Aaron Wagner (https://github.com/trvswgnr/)
 * Licensed under MIT (https://github.com/trvswgnr/bs5-lightbox/blob/main/LICENSE)
 */
var lightbox=function(c){"use strict";var k=Object.defineProperty;var I=(c,l,o)=>l in c?k(c,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[l]=o;var i=(c,l,o)=>I(c,typeof l!="symbol"?l+"":l,o);function l(h){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(h){for(const e in h)if(e!=="default"){const s=Object.getOwnPropertyDescriptor(h,e);Object.defineProperty(t,e,s.get?s:{enumerable:!0,get:()=>h[e]})}}return t.default=h,Object.freeze(t)}const o=l(c),r=class r{constructor(t,e={}){i(this,"hash");i(this,"settings");i(this,"modalOptions");i(this,"carouselOptions");i(this,"el");i(this,"src");i(this,"sources");i(this,"type");i(this,"carouselElement");i(this,"modalElement");i(this,"modal");i(this,"carousel");this.hash=this.randomHash(),this.settings=Object.assign({},o.Modal.Default,o.Carousel.Default,{interval:!1,target:'[data-toggle="lightbox"]',gallery:"",size:"xl",constrain:!0},e),this.modalOptions=this.setOptionsFromSettings(o.Modal.Default),this.carouselOptions=this.setOptionsFromSettings(o.Carousel.Default),typeof t=="string"&&(this.settings.target=t,t=document.querySelector(t)),this.el=t,this.type=t.dataset.type||"",t.dataset.size&&(this.settings.size=t.dataset.size),this.src=this.getSrc(t),this.sources=this.getGalleryItems(),this.createCarousel(),this.createModal()}show(){document.body.appendChild(this.modalElement),this.modal.show()}hide(){this.modal.hide()}setOptionsFromSettings(t){return Object.keys(t).reduce((e,s)=>Object.assign(e,{[s]:this.settings[s]}),{})}getSrc(t){let e=t.dataset.src||t.dataset.remote||t.href||"http://via.placeholder.com/1600x900";if(t.dataset.type==="html")return e;/https?:\/\//.test(e)||(e=window.location.origin+e);const s=new URL(e);return(t.dataset.footer||t.dataset.caption)&&s.searchParams.set("caption",t.dataset.footer||t.dataset.caption||""),s.toString()}getGalleryItems(){let t;if(this.settings.gallery){if(Array.isArray(this.settings.gallery))return this.settings.gallery;t=this.settings.gallery}else this.el.dataset.gallery&&(t=this.el.dataset.gallery);return t?[...new Set(Array.from(document.querySelectorAll(`[data-gallery="${t}"]`),s=>{const d=s;return`${d.dataset.type||""}${this.getSrc(d)}`}))]:[`${this.type||""}${this.src}`]}getYoutubeId(t){const e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return e&&e[2].length===11?e[2]:!1}getYoutubeLink(t){const e=this.getYoutubeId(t);if(!e)return!1;const s=t.split("?"),d=s.length>1?`?${s[1]}`:"";return`https://www.youtube.com/embed/${e}${d}`}getInstagramEmbed(t){if(/instagram/.test(t))return t+=/\/embed$/.test(t)?"":"/embed",`<iframe src="${t}" class="start-50 translate-middle-x" style="max-width: 500px" frameborder="0" scrolling="no" allowtransparency="true"></iframe>`}isEmbed(t){const s=new RegExp(`(${r.allowedEmbedTypes.join("|")})`).test(t),d=/\.(png|jpe?g|gif|svg|webp)/i.test(t)||this.el.dataset.type==="image";return s||!d}createCarousel(){const t=document.createElement("template"),e=r.allowedMediaTypes.join("|"),s=this.sources.map((a,n)=>{a=a.replace(/\/$/,"");const m=new RegExp(`^(${e})`,"i"),E=/^html/.test(a),S=/^image/.test(a);m.test(a)&&(a=a.replace(m,""));const C=this.settings.constrain?"mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0":"h-100 w-100",p=new URLSearchParams(a.split("?")[1]);let y="",g=a;if(p.get("caption"))try{g=new URL(a).toString().replace(`?${p}`,""),y=`<div class="carousel-caption d-none d-md-block" style="z-index:2"><p class="bg-secondary rounded">${p.get("caption")}</p></div>`}catch{g=a}let b=`<img src="${g}" class="d-block ${C} img-fluid" style="z-index: 1; object-fit: contain;" />`,f="";const O=this.getInstagramEmbed(a),v=this.getYoutubeLink(a);return this.isEmbed(a)&&!S&&(v&&(a=v,f='title="YouTube video player" frameborder="0" allow="accelerometer autoplay clipboard-write encrypted-media gyroscope picture-in-picture"'),b=O||`<img src="${a}" ${f} class="d-block mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0 img-fluid" style="z-index: 1; object-fit: contain;" />`),E&&(b=a),`
          <div class="carousel-item ${n?"":"active"}" style="min-height: 100px">
            <div class="position-absolute top-50 start-50 translate-middle text-white"><div class="spinner-border" style="width: 3rem; height: 3rem" role="status"></div></div>
            <div class="ratio ratio-16x9" style="background-color: #000;">${b}</div>
            ${y}
          </div>`}).join(""),d=this.sources.length<2?"":`
        <button id="#lightboxCarousel-${this.hash}-prev" class="carousel-control-prev" type="button" data-bs-target="#lightboxCarousel-${this.hash}" data-bs-slide="prev">
          <span class="btn btn-primary carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button id="#lightboxCarousel-${this.hash}-next" class="carousel-control-next" type="button" data-bs-target="#lightboxCarousel-${this.hash}" data-bs-slide="next">
          <span class="btn btn-primary carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>`,w=`
      <div class="carousel-indicators" style="bottom: -40px">
        ${this.sources.map((a,n)=>`
            <button type="button" data-bs-target="#lightboxCarousel-${this.hash}" data-bs-slide-to="${n}" class="${n===0?"active":""}" aria-current="${n===0?"true":"false"}" aria-label="Slide ${n+1}"></button>`).join("")}
      </div>`;t.innerHTML=`
      <div id="lightboxCarousel-${this.hash}" class="lightbox-carousel carousel slide" data-bs-ride="carousel" data-bs-interval="${this.carouselOptions.interval}">
        <div class="carousel-inner">${s}</div>
        ${w}
        ${d}
      </div>`.trim(),this.carouselElement=t.content.firstChild;const $={...this.carouselOptions,keyboard:!1};this.carousel=new o.Carousel(this.carouselElement,$);const x=this.type&&this.type!=="image"?this.type+this.src:this.src;return this.carousel.to(this.findGalleryItemIndex(this.sources,x)),this.carouselOptions.keyboard===!0&&document.addEventListener("keydown",a=>{var n,m;if(a.code==="ArrowLeft")return(n=document.getElementById(`#lightboxCarousel-${this.hash}-prev`))==null||n.click(),!1;if(a.code==="ArrowRight")return(m=document.getElementById(`#lightboxCarousel-${this.hash}-next`))==null||m.click(),!1}),this.carousel}findGalleryItemIndex(t,e){return t.findIndex(s=>s.includes(e))||0}createModal(){var e,s;const t=document.createElement("template");return t.innerHTML=`
      <div class="modal lightbox fade" id="lightboxModal-${this.hash}" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-${this.settings.size}">
          <div class="modal-content border-0 bg-transparent">
            <div class="modal-body p-0">
              <button type="button" class="btn-close position-absolute p-3" data-bs-dismiss="modal" aria-label="Close" style="top: -15px;right:-40px"></button>
            </div>
          </div>
        </div>
      </div>`.trim(),this.modalElement=t.content.firstChild,(e=this.modalElement.querySelector(".modal-body"))==null||e.appendChild(this.carouselElement),this.modalElement.addEventListener("hidden.bs.modal",()=>this.modalElement.remove()),(s=this.modalElement.querySelector("[data-bs-dismiss]"))==null||s.addEventListener("click",()=>this.modal.hide()),this.modal=new o.Modal(this.modalElement,this.modalOptions),this.modal}randomHash(t=8){return Array.from({length:t},()=>Math.floor(Math.random()*36).toString(36)).join("")}static initialize(t){t.preventDefault(),new r(this).show()}};i(r,"allowedEmbedTypes",["embed","youtube","vimeo","instagram","url"]),i(r,"allowedMediaTypes",[...r.allowedEmbedTypes,"image","html"]),i(r,"defaultSelector",'[data-toggle="lightbox"]');let u=r;return document.querySelectorAll(u.defaultSelector).forEach(h=>h.addEventListener("click",u.initialize)),typeof window<"u"&&window.bootstrap&&(window.bootstrap.Lightbox=u),u}(bootstrap);
//# sourceMappingURL=bs5-lightbox.iife.js.map
