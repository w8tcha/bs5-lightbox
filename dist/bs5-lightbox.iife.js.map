{"version":3,"file":"bs5-lightbox.iife.js","sources":["../src/bs5-lightbox.js"],"sourcesContent":["/**\r\n * Lightbox for Bootstrap 5\r\n *\r\n * @file Creates a modal with a lightbox carousel.\r\n * @module bs5-lightbox\r\n */\r\n\r\nimport { Modal, Carousel } from 'bootstrap';\r\nconst bootstrap = {\r\n\tModal,\r\n\tCarousel\r\n};\r\nclass Lightbox {\r\n\tconstructor(el, options = {}) {\r\n\t\tthis.hash = this.randomHash();\r\n\t\tthis.settings = Object.assign(Object.assign(Object.assign({}, bootstrap.Modal.Default), bootstrap.Carousel.Default), {\r\n\t\t\tinterval: false,\r\n\t\t\ttarget: '[data-toggle=\"lightbox\"]',\r\n\t\t\tgallery: '',\r\n\t\t\tsize: 'xl',\r\n\t\t\tconstrain: true\r\n\t\t});\r\n\t\tthis.settings = Object.assign(Object.assign({}, this.settings), options);\r\n\t\tthis.modalOptions = (() => this.setOptionsFromSettings(bootstrap.Modal.Default))();\r\n\t\tthis.carouselOptions = (() => this.setOptionsFromSettings(bootstrap.Carousel.Default))();\r\n\t\tif (typeof el === 'string') {\r\n\t\t\tthis.settings.target = el;\r\n\t\t\tel = document.querySelector(this.settings.target);\r\n\t\t}\r\n\t\tthis.el = el;\r\n\t\tthis.type = el.dataset.type || '';\r\n\r\n\t\t// check for data-size attribute\r\n\t\tif (el.dataset.size) {\r\n\t\t\tthis.settings.size = el.dataset.size;\r\n\t\t}\r\n\r\n\t\tthis.src = this.getSrc(el);\r\n\t\tthis.sources = this.getGalleryItems();\r\n\t\tthis.createCarousel();\r\n\t\tthis.createModal();\r\n\t}\r\n\tshow() {\r\n\t\tdocument.body.appendChild(this.modalElement);\r\n\t\tthis.modal.show();\r\n\t}\r\n\thide() {\r\n\t\tthis.modal.hide();\r\n\t}\r\n\tsetOptionsFromSettings(obj) {\r\n\t\treturn Object.keys(obj).reduce((p, c) => Object.assign(p, { [c]: this.settings[c] }), {});\r\n\t}\r\n\tgetSrc(el) {\r\n\t\tlet src = el.dataset.src || el.dataset.remote || el.href || 'http://via.placeholder.com/1600x900';\r\n\t\tif (el.dataset.type === 'html') {\r\n\t\t\treturn src;\r\n\t\t}\r\n\t\tif (!/\\:\\/\\//.test(src)) {\r\n\t\t\tsrc = window.location.origin + src;\r\n\t\t}\r\n\t\tconst url = new URL(src);\r\n\t\tif (el.dataset.footer || el.dataset.caption) {\r\n\t\t\turl.searchParams.set('caption', el.dataset.footer || el.dataset.caption);\r\n\t\t}\r\n\t\treturn url.toString();\r\n\t}\r\n\tgetGalleryItems() {\r\n\t\tlet galleryTarget;\r\n\t\tif (this.settings.gallery) {\r\n\t\t\tif (Array.isArray(this.settings.gallery)) {\r\n\t\t\t\treturn this.settings.gallery;\r\n\t\t\t}\r\n\t\t\tgalleryTarget = this.settings.gallery;\r\n\t\t} else if (this.el.dataset.gallery) {\r\n\t\t\tgalleryTarget = this.el.dataset.gallery;\r\n\t\t}\r\n\t\tconst gallery = galleryTarget\r\n\t\t\t? [...new Set(Array.from(document.querySelectorAll(`[data-gallery=\"${galleryTarget}\"]`), (v) => `${v.dataset.type ? v.dataset.type : ''}${this.getSrc(v)}`))]\r\n\t\t\t: [`${this.type ? this.type : ''}${this.src}`];\r\n\t\treturn gallery;\r\n\t}\r\n\tgetYoutubeId(src) {\r\n\t\tif (!src) return false;\r\n\t\tconst matches = src.match(/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/);\r\n\t\treturn matches && matches[2].length === 11 ? matches[2] : false;\r\n\t}\r\n\tgetYoutubeLink(src) {\r\n\t\tconst youtubeId = this.getYoutubeId(src);\r\n\t\tif (!youtubeId) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst arr = src.split('?');\r\n\t\tlet params = arr.length > 1 ? '?' + arr[1] : '';\r\n\t\t\r\n\t\treturn `https://www.youtube.com/embed/${youtubeId}${params}`;\r\n\t}\r\n\tgetInstagramEmbed(src) {\r\n\t\tif (/instagram/.test(src)) {\r\n\t\t\tsrc += /\\/embed$/.test(src) ? '' : '/embed';\r\n\t\t\treturn `<iframe src=\"${src}\" class=\"start-50 translate-middle-x\" style=\"max-width: 500px\" frameborder=\"0\" scrolling=\"no\" allowtransparency=\"true\"></iframe>`;\r\n\t\t}\r\n\t}\r\n\tisEmbed(src) {\r\n\t\tconst regex = new RegExp('(' + Lightbox.allowedEmbedTypes.join('|') + ')');\r\n\t\tconst isEmbed = regex.test(src);\r\n\t\tconst isImg = /\\.(png|jpe?g|gif|svg|webp)/i.test(src) || this.el.dataset.type === 'image';\r\n\r\n\t\treturn isEmbed || !isImg;\r\n\t}\r\n\tcreateCarousel() {\r\n\t\tconst template = document.createElement('template');\r\n\t\tconst types = Lightbox.allowedMediaTypes.join('|');\r\n\t\t\r\n\r\n\t\tconst slidesHtml = this.sources\r\n\t\t\t.map((src, i) => {\r\n\t\t\t\tsrc = src.replace(/\\/$/, '');\r\n\t\t\t\tconst regex = new RegExp(`^(${types})`, 'i');\r\n\t\t\t\tconst isHtml = /^html/.test(src);\r\n\t\t\t\tconst isForcedImage = /^image/.test(src);\r\n\r\n\t\t\t\tif (regex.test(src)) {\r\n\t\t\t\t\tsrc = src.replace(regex, '');\r\n\t\t\t\t}\r\n\t\t\t\tconst imgClasses = this.settings.constrain ? 'mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0' : 'h-100 w-100';\r\n\t\t\t\tconst params = new URLSearchParams(src.split('?')[1]);\r\n\t\t\t\tlet caption = '';\r\n\t\t\t\tlet url = src;\r\n\t\t\t\tif (params.get('caption')) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\turl = new URL(src);\r\n\t\t\t\t\t\turl.searchParams.delete('caption');\r\n\t\t\t\t\t\turl = url.toString();\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\turl = src;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcaption = `<div class=\"carousel-caption d-none d-md-block\" style=\"z-index:2\"><p class=\"bg-secondary rounded\">${params.get('caption')}</p></div>`;\r\n\t\t\t\t}\r\n\t\t\t\tlet inner = `<img src=\"${url}\" class=\"d-block ${imgClasses} img-fluid\" style=\"z-index: 1; object-fit: contain;\" />`;\r\n\t\t\t\tlet attributes = '';\r\n\t\t\t\tconst instagramEmbed = this.getInstagramEmbed(src);\r\n\t\t\t\tconst youtubeLink = this.getYoutubeLink(src);\r\n\t\t\t\tif (this.isEmbed(src) && !isForcedImage) {\r\n\t\t\t\t\tif (youtubeLink) {\r\n\t\t\t\t\t\tsrc = youtubeLink;\r\n\t\t\t\t\t\tattributes = 'title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer autoplay clipboard-write encrypted-media gyroscope picture-in-picture\"';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinner = instagramEmbed || `<img src=\"${src}\" ${attributes} class=\"d-block mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0 img-fluid\" style=\"z-index: 1; object-fit: contain;\" />`;\r\n\t\t\t\t}\r\n\t\t\t\tif (isHtml) {\r\n\t\t\t\t\tinner = src;\r\n\t\t\t\t}\r\n\t\t\t\tconst spinner = `<div class=\"position-absolute top-50 start-50 translate-middle text-white\"><div class=\"spinner-border\" style=\"width: 3rem height: 3rem\" role=\"status\"></div></div>`;\r\n\t\t\t\treturn `\r\n\t\t\t\t<div class=\"carousel-item ${!i ? 'active' : ''}\" style=\"min-height: 100px\">\r\n\t\t\t\t\t${spinner}\r\n\t\t\t\t\t<div class=\"ratio ratio-16x9\" style=\"background-color: #000;\">${inner}</div>\r\n\t\t\t\t\t${caption}\r\n\t\t\t\t</div>`;\r\n\t\t\t})\r\n\t\t\t.join('');\r\n\r\n        const controlsHtml =\r\n            this.sources.length < 2\r\n                ? ''\r\n                : `\r\n\t\t\t<button id=\"#lightboxCarousel-${this.hash\r\n                }-prev\" class=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#lightboxCarousel-${\r\n                this.hash}\" data-bs-slide=\"prev\">\r\n\t\t\t\t<span class=\"btn btn-secondary carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t<span class=\"visually-hidden\">Previous</span>\r\n\t\t\t</button>\r\n\t\t\t<button id=\"#lightboxCarousel-${this.hash\r\n                }-next\" class=\"carousel-control-next\" type=\"button\" data-bs-target=\"#lightboxCarousel-${\r\n                this.hash}\" data-bs-slide=\"next\">\r\n\t\t\t\t<span class=\"btn btn-secondary carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t<span class=\"visually-hidden\">Next</span>\r\n\t\t\t</button>`;\r\n    \r\n\t\tlet classes = 'lightbox-carousel carousel slide';\r\n\t\tif (this.settings.size === 'fullscreen') {\r\n\t\t\tclasses += ' position-absolute w-100 translate-middle top-50 start-50';\r\n\t\t}\r\n        const indicatorsHtml = `\r\n\t\t\t<div class=\"carousel-indicators\" style=\"bottom: -40px\">\r\n\t\t\t\t${this.sources.map((_, index) => `\r\n\t\t\t\t\t<button type=\"button\" data-bs-target=\"#lightboxCarousel-${this.hash}\" data-bs-slide-to=\"${index}\" class=\"${index === 0 ? 'active' : ''}\" aria-current=\"${index === 0 ? 'true' : 'false'}\" aria-label=\"Slide ${index + 1}\"></button>\r\n\t\t\t\t`).join('')}\r\n\t\t\t</div>`;\r\n\t\tconst html = `\r\n\t\t\t<div id=\"lightboxCarousel-${this.hash}\" class=\"${classes}\" data-bs-ride=\"carousel\" data-bs-interval=\"${this.carouselOptions.interval}\">\r\n\t\t\t    <div class=\"carousel-inner\">\r\n\t\t\t\t\t${slidesHtml}\r\n\t\t\t\t</div>\r\n\t\t\t    ${indicatorsHtml}\r\n\t\t\t\t${controlsHtml}\r\n\t\t\t</div>`;\r\n\t\ttemplate.innerHTML = html.trim();\r\n\t\tthis.carouselElement = template.content.firstChild;\r\n\t\tconst carouselOptions = Object.assign(Object.assign({}, this.carouselOptions), { keyboard: false });\r\n\t\tthis.carousel = new bootstrap.Carousel(this.carouselElement, carouselOptions);\r\n\t\tconst elSrc = this.type && this.type !== 'image' ? this.type + this.src : this.src;\r\n\t\tthis.carousel.to(this.findGalleryItemIndex(this.sources, elSrc));\r\n\t\tif (this.carouselOptions.keyboard === true) {\r\n\t\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\t\tif (e.code === 'ArrowLeft') {\r\n\t\t\t\t\tconst prev = document.getElementById(`#lightboxCarousel-${this.hash}-prev`);\r\n\t\t\t\t\tif (prev) {\r\n\t\t\t\t\t\tprev.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.code === 'ArrowRight') {\r\n\t\t\t\t\tconst next = document.getElementById(`#lightboxCarousel-${this.hash}-next`);\r\n\t\t\t\t\tif (next) {\r\n\t\t\t\t\t\tnext.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.carousel;\r\n\t}\r\n\tfindGalleryItemIndex(haystack, needle) {\r\n\t\tlet index = 0;\r\n\t\tfor (const item of haystack) {\r\n\t\t\tif (item.includes(needle)) {\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\tcreateModal() {\r\n\t\tconst template = document.createElement('template');\r\n\t\tconst html = `\r\n\t\t\t<div class=\"modal lightbox fade\" id=\"lightboxModal-${this.hash}\" tabindex=\"-1\" aria-hidden=\"true\">\r\n\t\t\t\t<div class=\"modal-dialog modal-dialog-centered modal-${this.settings.size}\">\r\n\t\t\t\t\t<div class=\"modal-content border-0 bg-transparent\">\r\n\t\t\t\t\t\t<div class=\"modal-body p-0\">\r\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn-close position-absolute p-3\" data-bs-dismiss=\"modal\" aria-label=\"Close\" style=\"top: -15px;right:-40px\"></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>`;\r\n\t\ttemplate.innerHTML = html.trim();\r\n\t\tthis.modalElement = template.content.firstChild;\r\n\t\tthis.modalElement.querySelector('.modal-body').appendChild(this.carouselElement);\r\n\t\tthis.modalElement.addEventListener('hidden.bs.modal', () => this.modalElement.remove());\r\n\t\tthis.modalElement.querySelector('[data-bs-dismiss]').addEventListener('click', () => this.modal.hide());\r\n\t\tthis.modal = new bootstrap.Modal(this.modalElement, this.modalOptions);\r\n\t\treturn this.modal;\r\n\t}\r\n\trandomHash(length = 8) {\r\n\t\treturn Array.from({ length }, () => Math.floor(Math.random() * 36).toString(36)).join('');\r\n\t}\r\n}\r\nLightbox.allowedEmbedTypes = ['embed', 'youtube', 'vimeo', 'instagram', 'url'];\r\nLightbox.allowedMediaTypes = [...Lightbox.allowedEmbedTypes, 'image', 'html'];\r\nLightbox.defaultSelector = '[data-toggle=\"lightbox\"]';\r\nLightbox.initialize = function (e) {\r\n\te.preventDefault();\r\n\tconst lightbox = new Lightbox(this);\r\n\tlightbox.show();\r\n};\r\ndocument.querySelectorAll(Lightbox.defaultSelector).forEach((el) => el.addEventListener('click', Lightbox.initialize));\r\nif (typeof window !== 'undefined' && window.bootstrap) {\r\n\twindow.bootstrap.Lightbox = Lightbox;\r\n}\r\nexport default Lightbox;"],"names":["bootstrap","Modal","Carousel","Lightbox","el","options","obj","p","c","src","url","galleryTarget","v","matches","youtubeId","arr","params","isEmbed","isImg","template","types","slidesHtml","i","regex","isHtml","isForcedImage","imgClasses","caption","inner","attributes","instagramEmbed","youtubeLink","controlsHtml","classes","indicatorsHtml","_","index","html","carouselOptions","elSrc","e","prev","next","haystack","needle","item","length"],"mappings":"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"}