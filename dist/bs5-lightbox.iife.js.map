{"version":3,"file":"bs5-lightbox.iife.js","sources":["../src/bs5-lightbox.ts"],"sourcesContent":["/**\n * Lightbox for Bootstrap 5\n *\n * @file Creates a modal with a lightbox carousel.\n * @module bs5-lightbox\n */\n\nimport * as bootstrap from \"bootstrap\";\nimport LightboxOptions from \"./interfaces/lightboxOptions\";\n\nclass Lightbox {\n  private hash: string;\n  private settings: LightboxOptions;\n  private modalOptions: bootstrap.Modal.Options;\n  private carouselOptions: bootstrap.Carousel.Options;\n  private el: HTMLElement;\n  private src: string;\n  private sources: string[];\n  private type: string;\n  private carouselElement!: HTMLElement;\n  private modalElement!: HTMLElement;\n  private modal!: bootstrap.Modal;\n  private carousel!: bootstrap.Carousel;\n\n  static allowedEmbedTypes = [\"embed\", \"youtube\", \"vimeo\", \"instagram\", \"url\"];\n  static allowedMediaTypes = [...Lightbox.allowedEmbedTypes, \"image\", \"html\"];\n  static defaultSelector = '[data-toggle=\"lightbox\"]';\n\n  constructor(\n    el: HTMLElement | string,\n    options: Partial<LightboxOptions> = {},\n  ) {\n    this.hash = this.randomHash();\n    this.settings = Object.assign(\n      {},\n      bootstrap.Modal.Default,\n      bootstrap.Carousel.Default,\n      {\n        interval: false,\n        target: '[data-toggle=\"lightbox\"]',\n        gallery: \"\",\n        size: \"xl\",\n        constrain: true,\n      },\n      options,\n    );\n\n    this.modalOptions = this.setOptionsFromSettings(bootstrap.Modal.Default);\n    this.carouselOptions = this.setOptionsFromSettings(\n      bootstrap.Carousel.Default,\n    );\n\n    if (typeof el === \"string\") {\n      this.settings.target = el;\n      el = document.querySelector(el) as HTMLElement;\n    }\n\n    this.el = el;\n    this.type = el.dataset.type || \"\";\n\n    if (el.dataset.size) {\n      this.settings.size = el.dataset.size;\n    }\n\n    this.src = this.getSrc(el);\n    this.sources = this.getGalleryItems();\n    this.createCarousel();\n    this.createModal();\n  }\n\n  show(): void {\n    document.body.appendChild(this.modalElement);\n    this.modal.show();\n  }\n\n  hide(): void {\n    this.modal.hide();\n  }\n\n  private setOptionsFromSettings(obj: any): any {\n    return Object.keys(obj).reduce(\n      (p: any, c: string) => Object.assign(p, { [c]: this.settings[c] }),\n      {},\n    );\n  }\n\n  private getSrc(el: HTMLElement): string {\n    let src =\n      el.dataset.src ||\n      el.dataset.remote ||\n      (el as HTMLAnchorElement).href ||\n      \"https://placehold.co/1600x900\";\n\n    if (el.dataset.type === \"html\" || el.dataset.type === \"image\") {\n      return src;\n    }\n\n    if (!/https?:\\/\\//.test(src)) {\n      src = window.location.origin + src;\n    }\n\n    const url = new URL(src);\n    if (el.dataset.footer || el.dataset.caption) {\n      url.searchParams.set(\n        \"caption\",\n        el.dataset.footer || el.dataset.caption || \"\",\n      );\n    }\n\n    return url.toString();\n  }\n\n  private getGalleryItems(): string[] {\n    let galleryTarget: string | undefined;\n\n    if (this.settings.gallery) {\n      if (Array.isArray(this.settings.gallery)) return this.settings.gallery;\n      galleryTarget = this.settings.gallery;\n    } else if (this.el.dataset.gallery) {\n      galleryTarget = this.el.dataset.gallery;\n    }\n\n    const gallery = galleryTarget\n      ? [\n          ...new Set(\n            Array.from(\n              document.querySelectorAll(`[data-gallery=\"${galleryTarget}\"]`),\n              (v: Element) => {\n                const el = v as HTMLElement;\n                return `${el.dataset.type || \"\"}${this.getSrc(el)}`;\n              },\n            ),\n          ),\n        ]\n      : [`${this.type || \"\"}${this.src}`];\n\n    return gallery;\n  }\n\n  private getYoutubeId(src: string): string | false {\n    const matches = src.match(\n      /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/,\n    );\n    return matches && matches[2].length === 11 ? matches[2] : false;\n  }\n\n  private getYoutubeLink(src: string): string | false {\n    const youtubeId = this.getYoutubeId(src);\n    if (!youtubeId) return false;\n\n    const arr = src.split(\"?\");\n    const params = arr.length > 1 ? `?${arr[1]}` : \"\";\n\n    return `https://www.youtube.com/embed/${youtubeId}${params}`;\n  }\n\n  private getInstagramEmbed(src: string): string | undefined {\n    if (/instagram/.test(src)) {\n      src += /\\/embed$/.test(src) ? \"\" : \"/embed\";\n      return `<iframe src=\"${src}\" class=\"start-50 translate-middle-x\" style=\"max-width: 500px\" frameborder=\"0\" scrolling=\"no\" allowtransparency=\"true\"></iframe>`;\n    }\n  }\n\n  private isEmbed(src: string): boolean {\n    const regex = new RegExp(`(${Lightbox.allowedEmbedTypes.join(\"|\")})`);\n    const isEmbed = regex.test(src);\n    const isImg =\n      /\\.(png|jpe?g|gif|svg|webp)/i.test(src) ||\n      this.el.dataset.type === \"image\";\n\n    return isEmbed || !isImg;\n  }\n\n  private createCarousel(): bootstrap.Carousel {\n    const template = document.createElement(\"template\");\n    const types = Lightbox.allowedMediaTypes.join(\"|\");\n\n    const slidesHtml = this.sources\n      .map((src, i) => {\n        src = src.replace(/\\/$/, \"\");\n        const regex = new RegExp(`^(${types})`, \"i\");\n        const isHtml = /^html/.test(src);\n        const isForcedImage = /^image/.test(src);\n\n        if (regex.test(src)) {\n          src = src.replace(regex, \"\");\n        }\n\n        const imgClasses = this.settings.constrain\n          ? \"mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0\"\n          : \"h-100 w-100\";\n\n        const params = new URLSearchParams(src.split(\"?\")[1]);\n        let caption = \"\";\n        let url = src;\n\n        if (params.get(\"caption\")) {\n          try {\n            url = new URL(src).toString().replace(`?${params}`, \"\");\n            caption = `<div class=\"carousel-caption d-none d-md-block\" style=\"z-index:2\"><p class=\"bg-secondary rounded\">${params.get(\n              \"caption\",\n            )}</p></div>`;\n          } catch {\n            url = src;\n          }\n        }\n\n        let inner = `<img src=\"${url}\" class=\"d-block ${imgClasses} img-fluid\" style=\"z-index: 1; object-fit: contain;\" />`;\n        let attributes = \"\";\n        const instagramEmbed = this.getInstagramEmbed(src);\n        const youtubeLink = this.getYoutubeLink(src);\n\n        if (this.isEmbed(src) && !isForcedImage) {\n          if (youtubeLink) {\n            src = youtubeLink;\n            attributes =\n              'title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer autoplay clipboard-write encrypted-media gyroscope picture-in-picture\"';\n          }\n          inner =\n            instagramEmbed ||\n            `<img src=\"${src}\" ${attributes} class=\"d-block mw-100 mh-100 h-auto w-auto m-auto top-0 end-0 bottom-0 start-0 img-fluid\" style=\"z-index: 1; object-fit: contain;\" />`;\n        }\n\n        if (isHtml) {\n          inner = src;\n        }\n\n        const spinner = `<div class=\"position-absolute top-50 start-50 translate-middle text-white\"><div class=\"spinner-border\" style=\"width: 3rem; height: 3rem\" role=\"status\"></div></div>`;\n\n        return `\n          <div class=\"carousel-item ${\n            !i ? \"active\" : \"\"\n          }\" style=\"min-height: 100px\">\n            ${spinner}\n            <div class=\"ratio ratio-16x9\" style=\"background-color: #000;\">${inner}</div>\n            ${caption}\n          </div>`;\n      })\n      .join(\"\");\n\n    const controlsHtml =\n      this.sources.length < 2\n        ? \"\"\n        : `\n        <button id=\"#lightboxCarousel-${this.hash}-prev\" class=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#lightboxCarousel-${this.hash}\" data-bs-slide=\"prev\">\n          <span class=\"btn btn-primary carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n          <span class=\"visually-hidden\">Previous</span>\n        </button>\n        <button id=\"#lightboxCarousel-${this.hash}-next\" class=\"carousel-control-next\" type=\"button\" data-bs-target=\"#lightboxCarousel-${this.hash}\" data-bs-slide=\"next\">\n          <span class=\"btn btn-primary carousel-control-next-icon\" aria-hidden=\"true\"></span>\n          <span class=\"visually-hidden\">Next</span>\n        </button>`;\n\n    const indicatorsHtml = `\n      <div class=\"carousel-indicators\" style=\"bottom: -40px\">\n        ${this.sources\n          .map(\n            (_, index) => `\n            <button type=\"button\" data-bs-target=\"#lightboxCarousel-${\n              this.hash\n            }\" data-bs-slide-to=\"${index}\" class=\"${\n              index === 0 ? \"active\" : \"\"\n            }\" aria-current=\"${\n              index === 0 ? \"true\" : \"false\"\n            }\" aria-label=\"Slide ${index + 1}\"></button>`,\n          )\n          .join(\"\")}\n      </div>`;\n\n    template.innerHTML = `\n      <div id=\"lightboxCarousel-${this.hash}\" class=\"lightbox-carousel carousel slide\" data-bs-ride=\"carousel\" data-bs-interval=\"${this.carouselOptions.interval}\">\n        <div class=\"carousel-inner\">${slidesHtml}</div>\n        ${indicatorsHtml}\n        ${controlsHtml}\n      </div>`.trim();\n\n    this.carouselElement = template.content.firstChild as HTMLElement;\n\n    const options: bootstrap.Carousel.Options = {\n      ...this.carouselOptions,\n      keyboard: false,\n    };\n\n    this.carousel = new bootstrap.Carousel(this.carouselElement, options);\n\n    const elSrc =\n      this.type && this.type !== \"image\" ? this.type + this.src : this.src;\n    this.carousel.to(this.findGalleryItemIndex(this.sources, elSrc));\n\n    if (this.carouselOptions.keyboard === true) {\n      document.addEventListener(\"keydown\", (e: KeyboardEvent) => {\n        if (e.code === \"ArrowLeft\") {\n          document\n            .getElementById(`#lightboxCarousel-${this.hash}-prev`)\n            ?.click();\n          return false;\n        }\n        if (e.code === \"ArrowRight\") {\n          document\n            .getElementById(`#lightboxCarousel-${this.hash}-next`)\n            ?.click();\n          return false;\n        }\n      });\n    }\n\n    return this.carousel;\n  }\n\n  private findGalleryItemIndex(haystack: string[], needle: string): number {\n    return haystack.findIndex((item) => item.includes(needle)) || 0;\n  }\n\n  private createModal(): bootstrap.Modal {\n    const template = document.createElement(\"template\");\n    template.innerHTML = `\n      <div class=\"modal lightbox fade\" id=\"lightboxModal-${this.hash}\" tabindex=\"-1\">\n        <div class=\"modal-dialog modal-dialog-centered modal-${this.settings.size}\">\n          <div class=\"modal-content border-0 bg-transparent\">\n            <div class=\"modal-body p-0\">\n              <button type=\"button\" class=\"btn-close position-absolute p-3\" data-bs-dismiss=\"modal\" aria-label=\"Close\" style=\"top: -15px;right:-40px\"></button>\n            </div>\n          </div>\n        </div>\n      </div>`.trim();\n\n    this.modalElement = template.content.firstChild as HTMLElement;\n    this.modalElement\n      .querySelector(\".modal-body\")\n      ?.appendChild(this.carouselElement);\n\n    this.modalElement.addEventListener(\"hidden.bs.modal\", () =>\n      this.modalElement.remove(),\n    );\n    this.modalElement\n      .querySelector(\"[data-bs-dismiss]\")\n      ?.addEventListener(\"click\", () => this.modal.hide());\n\n    this.modal = new bootstrap.Modal(this.modalElement, this.modalOptions);\n    return this.modal;\n  }\n\n  private randomHash(length = 8): string {\n    return Array.from({ length }, () =>\n      Math.floor(Math.random() * 36).toString(36),\n    ).join(\"\");\n  }\n\n  static initialize(this: HTMLElement, e: Event): void {\n    e.preventDefault();\n    const lightbox = new Lightbox(this);\n    lightbox.show();\n  }\n}\n\ndocument\n  .querySelectorAll(Lightbox.defaultSelector)\n  .forEach((el) => el.addEventListener(\"click\", Lightbox.initialize));\n\nif (typeof window !== \"undefined\" && (window as any).bootstrap) {\n  (window as any).bootstrap.Lightbox = Lightbox;\n}\n\nexport default Lightbox;\n"],"names":["Lightbox","el","options","bootstrap","obj","p","c","src","url","galleryTarget","v","matches","youtubeId","arr","params","isEmbed","isImg","template","types","slidesHtml","i","regex","isHtml","isForcedImage","imgClasses","caption","inner","attributes","instagramEmbed","youtubeLink","controlsHtml","indicatorsHtml","_","index","elSrc","e","haystack","needle","item","length"],"mappings":"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"}